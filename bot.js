const Discord = require('discord.js');
const client = new Discord.Client();
const moment = require("moment");
const prefix = '.'


client.on('ready', () => {
  console.log(`Logged in as ${client.user.tag}!`);
client.user.setGame(`+SOON`,"http://twitch.tv/S-F")
  console.log('')
  console.log('')
  console.log('â•”[â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•]â•—')
  console.log(`[Start] ${new Date()}`);
  console.log('â•š[â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•]â•')
  console.log('')
  console.log('â•”[â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•]â•—');
  console.log(`Logged in as * [ " ${client.user.username} " ]`);
  console.log('')
  console.log('Informations :')
  console.log('')
  console.log(`servers! [ " ${client.guilds.size} " ]`);
  console.log(`Users! [ " ${client.users.size} " ]`);
  console.log(`channels! [ " ${client.channels.size} " ]`);
  console.log('â•š[â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•]â•')
  console.log('')
  console.log('â•”[â•â•â•â•â•â•â•â•â•â•â•â•]â•—')
  console.log(' Bot Is Online')
  console.log('â•š[â•â•â•â•â•â•â•â•â•â•â•â•]â•')
  console.log('')
  console.log('')
});




client.on ("guildMemberAdd", member => {
  
  var role = member.guild.roles.find ("name","â–¶ ð‘´ð‘¬ð‘´ð‘©ð‘¬ð‘¹ â—€");
member.addRole(role);
  
})


  client.on ("guildMemberRemove", member => { 

  })


client.on('message', msg => {
 if(msg.content === "+bot") {
let embed24 = new Discord.RichEmbed()   
   .setThumbnail(client.user.avatarURL)
   .setColor("RANDOM")  
   .setTitle(`ðŸ¤–**Information about**ðŸ¤– || ${client.user.tag}`, true)
   .addField("ðŸ“œ**Name + Tag**ðŸ“œ", client.user.tag, true)
   .addField("ðŸ¤–**Bot Join Servers**ðŸ¤–", client.guilds.size, true)
   .addField("ðŸ‘¥**Sender**ðŸ‘¥", msg.author.tag, true)
   .addField("ðŸ¤–:id: *Bot ID** :id:ðŸ¤– ", client.user.id, true)
   .addField("ðŸ“†**Bot Created At**ðŸ“†", `${moment(client.user.createdAt).format('D/M/YYYY h:mm a')} **\n** \`${moment(client.user.createdAt).fromNow()}\``, true)
   .addField("ðŸ¤–**User**ðŸ¤–", client.users.size, true)
   .addField(`ðŸ‘‘**Owner Code By:**ðŸ‘‘`,`ðŸ‘‘**! NM Mody#7040**ðŸ‘‘`, true)
   .setFooter(`${msg.author.tag}`, `${msg.author.avatarURL}`, true)
msg.channel.sendEmbed(embed24)
}
 });










client.on('message', function(msg) {
    const prefix = '+'
    if(msg.content.startsWith ('+server')) {
      let embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setThumbnail(msg.guild.iconURL)
      .setTitle(`Showing Details Of  **${msg.guild.name}*`)
      .addField('ðŸŒ** server type**',`[** __${msg.guild.region}__ **]`,true)
      .addField('ðŸ…** __Roles__**',`[** __${msg.guild.roles.size}__ **]`,true)
      .addField('ðŸ”´**__ Members Number__**',`[** __${msg.guild.memberCount}__ **]`,true)
      .addField('ðŸ”µ**__ Members Number who online__**',`[** __${msg.guild.members.filter(m=>m.presence.status == 'online').size}__ **]`,true)
      .addField('ðŸ“**__ Text Channels__**',`[** __${msg.guild.channels.filter(m => m.type === 'text').size}__** ]`,true)
      .addField('ðŸŽ¤**__ voice Channels__**',`[** __${msg.guild.channels.filter(m => m.type === 'voice').size}__ **]`,true)
      .addField('ðŸ‘‘**__ The Owner__**',`**${msg.guild.owner}**`,true)
      .addField('ðŸ†”**__ Server ID__**',`**${msg.guild.id}**`,true)
      .addField('ðŸ“…**__The date when the server created __**',msg.guild.createdAt.toLocaleString())
      msg.channel.send({embed:embed});
    }
  });














client.on('message', function(msg) {
    const prefix = '+'
    if(msg.content.startsWith ('+server')) {
      let embed = new Discord.RichEmbed()
      .setColor('RANDOM')
      .setThumbnail(msg.guild.iconURL)
      .setTitle(`Showing Details Of  **${msg.guild.name}*`)
      .addField('ðŸŒ** server type**',`[** __${msg.guild.region}__ **]`,true)
      .addField('ðŸ…** __Roles__**',`[** __${msg.guild.roles.size}__ **]`,true)
      .addField('ðŸ”´**__ Members Number__**',`[** __${msg.guild.memberCount}__ **]`,true)
      .addField('ðŸ”µ**__ Members Number who online__**',`[** __${msg.guild.members.filter(m=>m.presence.status == 'online').size}__ **]`,true)
      .addField('ðŸ“**__ Text Channels__**',`[** __${msg.guild.channels.filter(m => m.type === 'text').size}__** ]`,true)
      .addField('ðŸŽ¤**__ voice Channels__**',`[** __${msg.guild.channels.filter(m => m.type === 'voice').size}__ **]`,true)
      .addField('ðŸ‘‘**__ The Owner__**',`**${msg.guild.owner}**`,true)
      .addField('ðŸ†”**__ Server ID__**',`**${msg.guild.id}**`,true)
      .addField('ðŸ“…**__The date when the server created __**',msg.guild.createdAt.toLocaleString())
      msg.channel.send({embed:embed});
    }
  });







 






client.on('message', message => {
var prefix = "+";

    if (message.author.id === client.user.id) return;
    if (message.guild) {
   let embed = new Discord.RichEmbed()
    let args = message.content.split(' ').slice(1).join(' ');
if(message.content.split(' ')[0] == prefix + 'bc') {
    if (!args[1]) {
message.channel.send("**+bc <message>**");
return;
}
        message.guild.members.forEach(m => {
   if(!message.member.hasPermission('ADMINISTRATOR')) return;
            var bc = new Discord.RichEmbed()
            .addField('Â» Ø§Ù„Ø³ÙŠØ±ÙØ± :', `${message.guild.name}`)
            .addField('Â» Ø§Ù„Ù…Ø±Ø³Ù„ : ', `${message.author.username}#${message.author.discriminator}`)
            .addField(' Â» Ø§Ù„Ø±Ø³Ø§Ù„Ø© : ', args)
            .setColor('#ff0000')
            // m.send(`[${m}]`);
            m.send(`${m}`,{embed: bc});
        });
    }
    } else {
        return;
    }
});











client.on('message', message => {
       if(message.content === prefix + "mutechannel") {
        
                           if(!message.channel.guild) return;

   if(!message.member.hasPermission('MANAGE_MESSAGES')) return message.reply(' **__Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª__**');
              message.channel.overwritePermissions(message.guild.id, {
            SEND_MESSAGES: false

              }).then(() => {
                  message.reply("**__ØªÙ… ØªÙ‚ÙÙŠÙ„ Ø§Ù„Ø´Ø§Øª__ âœ… **")
              });
                }
//FIRE BOT
    if(message.content === prefix + "unmutechannel") {
                        if(!message.channel.guild) return;

   if(!message.member.hasPermission('MANAGE_MESSAGES')) return message.reply('**__Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ§Øª__**');
              message.channel.overwritePermissions(message.guild.id, {
            SEND_MESSAGES: true

              }).then(() => {
                  message.reply("**__ØªÙ… ÙØªØ­ Ø§Ù„Ø´Ø§Øª__âœ…**")
              });
    }

});











client.on('message', message => {
    if(message.content.includes('discord.gg')){
                                            if(!message.channel.guild) return message.reply('** advertising me on DM ? ðŸ¤”   **');
        if (!message.member.hasPermissions(['ADMINISTRATOR'])){
        message.delete()
    return message.reply(`** No Invite Links :angry: !**`)
    }
}
});











 client.on('guildMemberAdd', member => {
    let channel = member.guild.channels.find('name', 'â¸¨ð–¤Ù…Ø±Ø­Ø¨Ø§ð–¤â¸©');
    let memberavatar = member.user.avatarURL
      if (!channel) return;
    let embed = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setThumbnail(memberavatar)
        .addField('â€¢ðŸ”°|NameÂ» Ø§Ù„Ø¥Ø³Ù…',`${member}`)
        .addField('â€¢ðŸŒ¹|Welcome Â» Ù†ÙˆØ±Øª Ø§Ù„Ø³ÙŠØ±ÙØ±' , `Welcome to the server, ${member}`)
        .addField('â€¢ðŸ†”| User Â» Ø§ÙŠ Ø¯ÙŠ Ø§Ù„Ø¹Ø¶Ùˆ', "**[" + `${member.id}` + "]**" )
                .addField('âž¡| Ø§Ù†Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø±Ù‚Ù…',`${member.guild.memberCount}`)                     
                                     .addField('â€¢ðŸ”®|Server Name Â» Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ±ÙØ±', `${member.guild.name}`,true)
    .addField('â€¢ðŸ•£|Time Create Â» Ù…Ø¯Ø© Ø§Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ', member.user.createdAt.toLocaleString(), true)
 
                                       
     .setFooter("!NM Mody#7040")
        .setTimestamp()
   
      channel.sendEmbed(embed);
    });
  










client.on('message', message => {       
if (message.content.startsWith('+clear')) { //xRGRx .. By Julian
    if(!message.channel.guild) return message.reply('â›” | This Command For Servers Only!'); 
        if(!message.member.hasPermission('MANAGE_MESSAGES')) return message.channel.send('â›” | You dont have **MANAGE_MESSAGES** Permission!');
        if(!message.guild.member(client.user).hasPermission('MANAGE_MESSAGES')) return message.channel.send('â›” | I dont have **MANAGE_MESSAGES** Permission!');
 let args = message.content.split(" ").slice(1)
    let messagecount = parseInt(args);
    if (args > 99) return message.reply("**ðŸ›‘ || ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø­ Ø£Ù‚Ù„ Ù…Ù† 100 .**").then(messages => messages.delete(5000))
    if(!messagecount) args = '100';
    message.channel.fetchMessages({limit: messagecount + 1}).then(messages => message.channel.bulkDelete(messages));
    message.channel.send(`\`${args}\` : __Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ØªÙ… Ù…Ø³Ø­Ù‡Ø§ __ `).then(messages => messages.delete(5000));
  }
  });
  











 client.on('message', message => {
    if (message.content.startsWith("+avatar")) {
if(!message.channel.guild) return;
        var mentionned = message.mentions.users.first();
    var client;
      if(mentionned){
          var client = mentionned; } else {
          var client = message.author;
      }
        const embed = new Discord.RichEmbed()
                           .addField('Requested by:', "<@" + message.author.id + ">")
        .setColor(000000)
        .setImage(`${client.avatarURL}`)
      message.channel.sendEmbed(embed);
    }
});











 client.on('message', message => {
        var prefix = "+";
        if(message.content.startsWith(prefix + 'mutevoice')) {
          if(!message.member.hasPermission("MUTE_MEMBERS")) return message.channel.sendMessage("**Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ø§Ø¹Ø·Ø§Ø¡ Ù…ÙŠÙˆØª ØµÙˆØªÙŠ**âŒ ").then(m => m.delete(5000));
          if(!message.guild.member(client.user).hasPermission("MUTE_MEMBERS")) return message.reply("**I Don't Have `MUTE_MEMBERS` Permission**").then(msg => msg.delete(6000))
           
        if(message.mentions.users.size === 0) {
          return message.reply("Please mention a user to mute.");
        }
        let muteMember = message.guild.member(message.mentions.users.first());
        if(!muteMember) {
          return message.reply("Try again.");
        }
        muteMember.setMute(true);
        if(muteMember) {
          message.channel.sendMessage("User muted successfully.");
        }
      }
    });











  client.on('message', message => {
      var prefix = "+";
      if(message.content.startsWith(prefix + 'unmutevoice')) {
        if(!message.member.hasPermission("MUTE_MEMBERS")) return message.channel.sendMessage("**Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ø§Ø¹Ø·Ø§Ø¡ Ù…ÙŠÙˆØª ØµÙˆØªÙŠ**âŒ ").then(m => m.delete(5000));
        if(!message.guild.member(client.user).hasPermission("MUTE_MEMBERS")) return message.reply("**I Don't Have `MUTE_MEMBERS` Permission**").then(msg => msg.delete(6000))
         
      if(message.mentions.users.size === 0) {
        return message.reply("Please mention a user to mute.");
      }
      let muteMember = message.guild.member(message.mentions.users.first());
      if(!muteMember) {
        return message.reply("Try again.");
      }
      muteMember.setMute(false);
      if(muteMember) {
        message.channel.sendMessage("User muted successfully.");
      }
    }
  });










client.on('message' , function (message){
      var token = 'NTA3ODc4ODU5MzUwNDc0NzUz.DsSAIQ.XPiAeP8SsrAxkFcp6LK6yL7S6Ps'; // Ø§Ù„ØªÙˆÙƒÙ† Ù‡Ù†Ø§ Ø¨Ø³
      if(message.content === '+restart') {
if(message.author.id !== '478544778741678090') return message.reply('Ø§Ù„Ø§Ù…Ø± Ø®Ø§Øµ Ø¨Ù€ ØµØ§Ø­Ø¨ Ø§Ù„Ø¨ÙˆØª ÙˆØ´ÙƒØ±Ø§');
          client.destroy();
          client.login(token) // Ù„Ø§ ØªØºÙŠØ±Ù‡Ø§
var time = 7200000;
client.setInterval(function() {
    client.destroy();
    client.login(token) // Ù„Ø§ ØªØºÙŠØ±Ù‡Ø§
  }, time);
}
})









client.on('message', async message =>{
  var prefix = "*";
const ms = require("ms");
if (message.author.omar) return;
if (!message.content.startsWith(prefix)) return;
if(!message.channel.guild) return message.channel.send('').then(m => m.delete(5000));
if(!message.guild.member(client.user).hasPermission("MANAGE_ROLES")) return message.reply("**I Don't Have `MANAGE_ROLES` Permission**").then(msg => msg.delete(6000))
var command = message.content.split(" ")[0];
command = command.slice(prefix.length);
var args = message.content.split(" ").slice(1);
    if(command == "mute") {
    let tomute = message.guild.member(message.mentions.users.first() || message.guild.members.get(args[0]));
    if(!tomute) return message.reply("**ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ù…Ù†Ø´Ù† Ø§ÙˆÙ„Ø§Ù‘**:x: ") .then(m => m.delete(5000));
    if(tomute.hasPermission("MANAGE_MESSAGES"))return      message.channel.send('**Ù„Ù„Ø£Ø³Ù Ù„Ø§ Ø£Ù…ØªÙ„Ùƒ ØµÙ„Ø§Ø­ÙŠØ©** `MANAGE_MASSAGEES`');
    let muterole = message.guild.roles.find(`name`, "Muted");
    //start of create role
    if(!muterole){
      try{
        muterole = await message.guild.createRole({
          name: "Muted",
          color: "#070000",
          permissions:[]
        })
        message.guild.channels.forEach(async (channel, id) => {
          await channel.overwritePermissions(muterole, {
            SEND_MESSAGES: false,
            ADD_REACTIONS: false,
            SPEAK : false
          });
        });
      }catch(e){
        console.log(e.stack);
      }
    }
    //end of create role
    let mutetime = args[1];
    if(!mutetime) return message.reply("**ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ÙˆÙ‚Øª Ø§Ù„Ù…ÙŠÙˆØª**:x:");
 
    await(tomute.addRole(muterole.id));
message.reply(`<@${tomute.id}> **ØªÙ… Ø§Ø¹Ø·Ø§Ø¦Ù‡ Ù…ÙŠÙˆØª ÙˆÙ…Ø¯Ø© Ø§Ù„Ù…ÙŠÙˆØª** : ${ms(ms(mutetime))}`);
setTimeout(function(){
      tomute.removeRole(muterole.id);
      message.channel.send(`<@${tomute.id}> **Ø§Ù†Ù‚Ø¶Ù‰ Ø§Ù„ÙˆÙ‚Øª ÙˆØªÙ… ÙÙƒ Ø§Ù„Ù…ÙŠÙˆØª Ø¹Ù† Ø§Ù„Ø´Ø®Øµ**:white_check_mark: `);
    }, ms(mutetime));
 
 
 
  }
if(command === `unmute`) {
  if(!message.member.hasPermission("MANAGE_ROLES")) return message.channel.sendMessage("**Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„ÙÙƒ Ø¹Ù† Ø§Ù„Ø´Ø®Øµ Ù…ÙŠÙˆØª**:x: ").then(m => m.delete(5000));
if(!message.guild.member(client.user).hasPermission("MANAGE_ROLES")) return message.reply("**I Don't Have `MANAGE_ROLES` Permission**").then(msg => msg.delete(6000))
 
  let toMute = message.guild.member(message.mentions.users.first()) || message.guild.members.get(args[0]);
  if(!toMute) return message.channel.sendMessage("**Ø¹Ù„ÙŠÙƒ Ø§Ù„Ù…Ù†Ø´Ù† Ø£ÙˆÙ„Ø§Ù‘**:x: ");
 
  let role = message.guild.roles.find (r => r.name === "Muted");
 
  if(!role || !toMute.roles.has(role.id)) return message.channel.sendMessage("**Ù„Ù… ÙŠØªÙ… Ø§Ø¹Ø·Ø§Ø¡ Ù‡Ø°Ù‡ Ø´Ø®Øµ Ù…ÙŠÙˆØª Ù…Ù† Ø§Ù„Ø£Ø³Ø§Ø³**:x:")
 
  await toMute.removeRole(role)
  message.channel.sendMessage("**Ù„Ù‚Ø¯ ØªÙ… ÙÙƒ Ø§Ù„Ù…ÙŠÙˆØª Ø¹Ù† Ø´Ø®Øµ Ø¨Ù†Ø¬Ø§Ø­**:white_check_mark:");
 
  return;
 
  }
 
});









client.on('message', message => {
    if (message.content.startsWith("+inv")) {

  message.channel.createInvite({
        thing: true,
        maxUses: 10,
        maxAge: 86400
    }).then(invite =>
      message.author.sendMessage(invite.url)
    )
  message.channel.send("**ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©**")

message.author.send(`**Ù…Ø¯Ø© Ø§Ù„Ø±Ø§Ø¨Ø· : ÙŠÙ€ÙˆÙ…
Ø¹Ø¯Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Øª Ø§Ù„Ø±Ø§Ø¨Ø· : 2**`)


    }
});




client.login(process.env.BOT_TOKEN);
